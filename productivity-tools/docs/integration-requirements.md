# 統合スケジュール管理ツール要件定義

## 1. 概要
Todo、WBS、カンバン、ガントチャートを統合した包括的なスケジュール管理ツールとして再設計する。

## 2. 各ツールの役割と連携

### 2.1 Todo管理
- **役割**: 個別のタスク管理、日々の作業管理
- **連携**: 
  - WBSの最下層タスクと同期
  - カンバンのカードとして表示可能
  - ガントチャートのタスクとして期限設定時に表示

### 2.2 WBS（作業分解構造）
- **役割**: プロジェクトの階層構造管理、全体像の把握
- **連携**:
  - 最下層タスクがTodoとして管理可能
  - 各タスクがガントチャートに反映
  - ステータスがカンバンビューで確認可能

### 2.3 カンバンボード
- **役割**: タスクのステータス管理、ワークフロー可視化
- **連携**:
  - Todoタスクをカード形式で表示
  - WBSタスクのステータス管理
  - ステータス変更が他のビューに反映

### 2.4 ガントチャート
- **役割**: スケジュール管理、依存関係の可視化
- **連携**:
  - WBSの構造を維持したまま表示
  - Todoの期限をタイムライン上に表示
  - カンバンのステータスを色分け表示

## 3. データモデルの統合

### 3.1 統一タスクモデル
```typescript
interface UnifiedTask {
  // 共通属性
  id: string;
  title: string;
  description?: string;
  status: 'todo' | 'in_progress' | 'done' | 'archived';
  priority: 'low' | 'medium' | 'high';
  createdAt: Date;
  updatedAt: Date;
  
  // Todo属性
  dueDate?: Date;
  tags?: string[];
  
  // WBS属性
  parentId?: string;
  children?: string[];
  level?: number;
  order?: number;
  
  // カンバン属性
  laneId?: string;
  position?: number;
  labels?: string[];
  
  // ガント属性
  startDate?: Date;
  endDate?: Date;
  progress?: number;
  dependencies?: string[];
  assigneeId?: string;
  isCriticalPath?: boolean;
  
  // ビュー設定
  visibleIn: ('todo' | 'wbs' | 'kanban' | 'gantt')[];
}
```

### 3.2 データ同期ルール
1. **作成時**:
   - どのビューで作成されても、適切な属性が設定される
   - 必要に応じて他のビューにも自動的に表示

2. **更新時**:
   - ステータス変更は全ビューに反映
   - 日付変更はガントチャートと連動
   - 階層変更はWBSとガントに反映

3. **削除時**:
   - 依存関係の自動解除
   - 子タスクの処理（削除/親変更）

## 4. UI設計

### 4.1 統合ナビゲーション
```
[ロゴ] スケジュール管理ツール
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[Todo] [WBS] [カンバン] [ガント] | [設定] [ユーザー]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 4.2 ビュー切り替え
- タブ形式で瞬時に切り替え可能
- データは共有、表示方法のみ変更
- 各ビューの状態（フィルタ、ソート）を保持

### 4.3 共通ツールバー
- 検索（全ビュー横断）
- フィルタ（ステータス、優先度、担当者）
- 新規作成（現在のビューに応じた作成）
- インポート/エクスポート

## 5. 機能要件

### 5.1 ビュー間連携
- [ ] Todoで作成したタスクをWBSに追加
- [ ] WBSタスクをカンバンで管理
- [ ] カンバンのステータス変更をガントに反映
- [ ] ガントの日程変更をTodoの期限に反映

### 5.2 データ同期
- [ ] リアルタイム同期（オフライン対応）
- [ ] 競合解決メカニズム
- [ ] 変更履歴の記録

### 5.3 一括操作
- [ ] 複数タスクの一括ステータス変更
- [ ] ドラッグ&ドロップでの階層/順序変更
- [ ] 一括日程調整

### 5.4 レポート機能
- [ ] プロジェクト進捗ダッシュボード
- [ ] リソース使用状況
- [ ] 期限アラート

## 6. 技術的考慮事項

### 6.1 状態管理
- Zustandで統一的な状態管理
- 各ビューは同じストアを参照
- 楽観的更新とロールバック

### 6.2 パフォーマンス
- 仮想スクロール（大量タスク対応）
- 遅延読み込み
- メモ化による再レンダリング最適化

### 6.3 データ永続化
- SQLite（オフライン対応）
- インデックス最適化
- トランザクション管理

## 7. 実装優先順位

1. **Phase 1**: データモデル統合
   - 統一タスクモデルの実装
   - 既存データのマイグレーション
   
2. **Phase 2**: UI統合
   - 統合ナビゲーションの実装
   - ビュー切り替え機能
   
3. **Phase 3**: 連携機能
   - ビュー間のデータ同期
   - リアルタイム更新
   
4. **Phase 4**: 高度な機能
   - レポート機能
   - 一括操作
   - 詳細な権限管理